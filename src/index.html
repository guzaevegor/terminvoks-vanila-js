<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theremin App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="header">
    <h1 class="title">Theremin App</h1>
    <p class="slogan">Feel the sound, shape the waves</p>
</div>

<div class="main-content">
    <canvas id="myCanvas"></canvas>
</div>

<button class="settings-button" onclick="toggleSettings()">⚙️</button>

<div class="settings-panel" id="settingsPanel">
    <h2>Settings</h2>
    <p>Adjust your preferences:</p>
</div>

<script>
    const myVideo = document.createElement("video");
    navigator.mediaDevices.getUserMedia({ video: true }).then(function (rawData) {
        myVideo.srcObject = rawData;
        myVideo.play();
        myVideo.onloadeddata = function () {
            myCanvas.width = myVideo.videoWidth;
            myCanvas.height = myVideo.videoHeight;
            new Effect(myCanvas, myVideo);
        };
    }).catch(function (err) {
        alert(err);
    });

    // Функция переключения состояния шторки
    function toggleSettings() {
        const panel = document.getElementById("settingsPanel");
        panel.classList.toggle("open");
    }

    // Закрытие шторки при клике вне её области
    document.addEventListener("click", (event) => {
        const panel = document.getElementById("settingsPanel");
        const button = document.querySelector(".settings-button");
        if (!panel.contains(event.target) && !button.contains(event.target) && panel.classList.contains("open")) {
            panel.classList.remove("open");
        }
    });
</script>

<script src="effect.js"></script>
<script src="utils.js"></script>
</body>
</html>
